"use strict";(self.webpackChunkhandsonreact=self.webpackChunkhandsonreact||[]).push([[5061],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,h=u["".concat(s,".").concat(d)]||u[d]||m[d]||r;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6109:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var o=n(7462),a=(n(7294),n(3905));const r={title:"Component Architecture",sidebar_label:"Component Architecture",slug:"/component-architecture"},i=void 0,l={unversionedId:"ComponentArchitecture",id:"ComponentArchitecture",title:"Component Architecture",description:"Reuse",source:"@site/docs/12-ComponentArchitecture.md",sourceDirName:".",slug:"/component-architecture",permalink:"/docs/component-architecture",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/12-ComponentArchitecture.md",tags:[],version:"current",sidebarPosition:12,frontMatter:{title:"Component Architecture",sidebar_label:"Component Architecture",slug:"/component-architecture"},sidebar:"someSidebar",previous:{title:"Conditional Rendering",permalink:"/docs/conditional-rendering"},next:{title:"Debugging",permalink:"/docs/debugging"}},s={},c=[{value:"Reuse",id:"reuse",level:2},{value:"Component Communication",id:"component-communication",level:2},{value:"Common Communication Patterns",id:"common-communication-patterns",level:4},{value:"Additional Communication Patterns",id:"additional-communication-patterns",level:4},{value:"Lifting State Up",id:"lifting-state-up",level:2},{value:"Function Component Example",id:"function-component-example",level:3},{value:"Class Component Example",id:"class-component-example",level:3},{value:"Container and Presentation Components",id:"container-and-presentation-components",level:2},{value:"Container (Smart) Components",id:"container-smart-components",level:3},{value:"Presentation Components",id:"presentation-components",level:3},{value:"Reference",id:"reference",level:3},{value:"Composition vs Inheritance",id:"composition-vs-inheritance",level:2},{value:"Thinking in React",id:"thinking-in-react",level:2},{value:"Reference",id:"reference-1",level:2}],p={toc:c};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"reuse"},"Reuse"),(0,a.kt)("p",null,"You can split a component into multiple smaller components to have a more readable and maintanable design and/or to achieve reuse."),(0,a.kt)("p",null,"But how do you know what should be its own component?"),(0,a.kt)("p",null,"Here are some questions to ask yourself when determining when to create another component:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Is it possible for your code chunk to be reused?")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If yes, construction of a new component seems like a great idea."),(0,a.kt)("li",{parentName:"ul"},"Even if the reuse is within a single component.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Is your code quite complex?")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If yes maybe its good idea to split in separate components in order to make your code more readable and maintainable.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Software Design")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In general, just use the same techniques for deciding if you should create a new function or object."),(0,a.kt)("li",{parentName:"ul"},"One such technique is the single responsibility principle, that is, a component should ideally only do one thing. If it ends up growing, it should be decomposed into smaller subcomponents.")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"After you create more components, more questions arise such as:")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"How should components interact? (Component Communication)"),(0,a.kt)("li",{parentName:"ul"},"Are there any design patterns I should follow when creating components? (Lifting State Up, Composition vs Inheritance)"),(0,a.kt)("li",{parentName:"ul"},"What types of components are there? (Container vs. Presentation)"),(0,a.kt)("li",{parentName:"ul"},"How do I make my components reusable?")),(0,a.kt)("p",null,"This section explores each of those questions."),(0,a.kt)("h2",{id:"component-communication"},"Component Communication"),(0,a.kt)("p",null,"How should components interact?"),(0,a.kt)("h4",{id:"common-communication-patterns"},"Common Communication Patterns"),(0,a.kt)("p",null,"Components commonly communicate in these ways:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Parent to Child"),(0,a.kt)("li",{parentName:"ul"},"Child to Parent")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Parent to Child")," communication is passing a data property into a component. More specifically, passing some data (could be a string (primitive), object, array) into a child component."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function App() {\n  return <Parent />;\n}\n\nfunction Parent() {\n  const [words, setWords] = React.useState('');\n\n  const handleClick = () => {\n    setWords('Did you do your homework?');\n  };\n\n  return (\n    <div>\n      <h1>Parent</h1>\n      <button onClick={handleClick}>Ask</button>\n      <Child hears={words} />\n    </div>\n  );\n}\n\nfunction Child(props) {\n  return (\n    <div>\n      <h2>Child</h2>\n      <p>{props.hears}</p>\n    </div>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Child to Parent")," communication is passing a function as a property into a component. The function is later invoked in the child but executed in the context of the parent."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function App() {\n  return <Parent />;\n}\n\nfunction Parent() {\n  const handleRequest = (request) => {\n    if (request.includes('car')) {\n      alert('No');\n    }\n  };\n\n  return (\n    <div>\n      <h1>Parent</h1>\n      <Child onRequest={handleRequest} />\n    </div>\n  );\n}\nfunction Child(props) {\n  const handleClick = () => {\n    props.onRequest('Can I have the car?');\n  };\n\n  return (\n    <div>\n      <h2>Child</h2>\n      <button onClick={handleClick}>Ask for the car</button>\n    </div>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,a.kt)("h4",{id:"additional-communication-patterns"},"Additional Communication Patterns"),(0,a.kt)("p",null,'Now that you understand how this communication works in practice then we can explore these additional communication patterns which are essentially variations on "Parent to Child" and "Child to Parent"'),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Child to Child (siblings)"),(0,a.kt)("li",{parentName:"ul"},"Grandparent to Grandchild"),(0,a.kt)("li",{parentName:"ul"},"Grandchild to Parent")),(0,a.kt)("p",null,"Essentially, ",(0,a.kt)("strong",{parentName:"p"},"communication doesn't skip generations")," so if it is going to happen you need to manually communicate up or down between each generation."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Component communication does not work like JavaScript events...there is no event bubbling.")),(0,a.kt)("h1",{id:"design-patterns"},"Design Patterns"),(0,a.kt)("h2",{id:"lifting-state-up"},"Lifting State Up"),(0,a.kt)("p",null,"Often, several components need to reflect the same changing data. We recommend lifting the shared state up to their closest common ancestor."),(0,a.kt)("p",null,"Here is an example."),(0,a.kt)("h3",{id:"function-component-example"},"Function Component Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Button({ onClickFunction }) {\n  return <button onClick={onClickFunction}>+1</button>;\n}\n\nconst Result = ({ value }) => {\n  return <div>Result: {value}</div>;\n};\n\nfunction App() {\n  const [counter, setCounter] = React.useState(0);\n\n  const incrementCounter = () => {\n    setCounter((previousCounter) => previousCounter + 1);\n  };\n\n  return (\n    <div>\n      <Button onClickFunction={incrementCounter} />\n      <Result value={counter} />\n    </div>\n  );\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,a.kt)("h3",{id:"class-component-example"},"Class Component Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"class Button extends React.Component {\n  render() {\n    return <button onClick={this.props.onClickFunction}>+1</button>;\n  }\n}\n\nconst Result = (props) => {\n  return <div>Result: {props.value}</div>;\n};\n\nclass App extends React.Component {\n  state = {\n    counter: 0,\n  };\n\n  incrementCounter = () => {\n    this.setState((prevState) => ({\n      counter: prevState.counter + 1,\n    }));\n  };\n\n  render() {\n    return (\n      <div>\n        <Button onClickFunction={this.incrementCounter} />\n        <Result value={this.state.counter} />\n      </div>\n    );\n  }\n}\n\nReactDOM.createRoot(document.getElementById('root')).render(<App />);\n")),(0,a.kt)("p",null,"The React documentation summarizes it best:"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"There should be a single \u201csource of truth\u201d for any data that changes in a React application. Usually, the state is first added to the component that needs it for rendering. Then, if other components also need it, you can lift it up to their closest common ancestor. Instead of trying to sync the state between different components, you should rely on the top-down data flow.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Lifting state involves writing more \u201cboilerplate\u201d code than two-way binding approaches, but as a benefit, it takes less work to find and isolate bugs. Since any state \u201clives\u201d in some component and that component alone can change it, the surface area for bugs is greatly reduced. Additionally, you can implement any custom logic to reject or transform user input.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If something can be derived from either props or state, it probably shouldn\u2019t be in the state.")),(0,a.kt)("h2",{id:"container-and-presentation-components"},"Container and Presentation Components"),(0,a.kt)("h3",{id:"container-smart-components"},"Container (Smart) Components"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Are concerned with\xa0",(0,a.kt)("em",{parentName:"li"},"how things work")),(0,a.kt)("li",{parentName:"ul"},"Provide the data and behavior to presentational or other container components"),(0,a.kt)("li",{parentName:"ul"},"Loads and modifies data via calls to an API"),(0,a.kt)("li",{parentName:"ul"},"May contain both presentational and container components","*","*"," inside but usually don\u2019t have any DOM markup of their own except for some wrapping divs, and never have any styles"),(0,a.kt)("li",{parentName:"ul"},"Also know as container components or controller components")),(0,a.kt)("h3",{id:"presentation-components"},"Presentation Components"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Are concerned with\xa0",(0,a.kt)("em",{parentName:"li"},"how things look")),(0,a.kt)("li",{parentName:"ul"},"Receive data and callbacks exclusively via props"),(0,a.kt)("li",{parentName:"ul"},"Don\u2019t specify how the data is loaded or changed"),(0,a.kt)("li",{parentName:"ul"},"Also know as pure components or dumb components")),(0,a.kt)("h3",{id:"reference"},"Reference"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0"},"Presentational and Container Components by Dan Abramov"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://twitter.com/dan_abramov/status/802569801906475008"},"Not a Rule but Something to Notice")))),(0,a.kt)("p",null,"Until Recently when React introduced ",(0,a.kt)("inlineCode",{parentName:"p"},"Hooks")," seems like almost every component eventually needed state so people tended to just create class components by default. In reality, it's not one or the other...often components are a blend of both. Just be aware the more stateful they become the harder they are to test and reuse but reuse often comes at a cost of complexity."),(0,a.kt)("p",null,"Often my presentation components aren't pure presentation components, they have some state particularly local form state."),(0,a.kt)("h2",{id:"composition-vs-inheritance"},"Composition vs Inheritance"),(0,a.kt)("p",null,"React recommends using composition instead of inheritance to reuse code between components."),(0,a.kt)("p",null,"In general, components can be nested inside other components or live next to other components just like in HTML where a ",(0,a.kt)("inlineCode",{parentName:"p"},"<div>")," can have a ",(0,a.kt)("inlineCode",{parentName:"p"},"<p>")," inside of it and the ",(0,a.kt)("inlineCode",{parentName:"p"},"<p>")," can have an ",(0,a.kt)("inlineCode",{parentName:"p"},"<a>")," and an ",(0,a.kt)("inlineCode",{parentName:"p"},"<img>"),". HTML works on composition so React components work on composition as they are essentially HTML tags you invented."),(0,a.kt)("p",null,"See the section ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/composition-vs-inheritance.html"},"Composition vs Inheritance")," in the React documentation for more information."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"We use React in thousands of components, and we haven\u2019t found any use cases where we would recommend creating component inheritance hierarchies. - Facebook")),(0,a.kt)("h2",{id:"thinking-in-react"},"Thinking in React"),(0,a.kt)("p",null,"Here are some steps you might find useful as you learn to ",(0,a.kt)("strong",{parentName:"p"},"Think in React")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Break the UI Into a Component Hierarchy")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Build a Static Version in React"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"No State or Props"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Identify The Minimal (but complete) Representation Of UI State")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Identify Where Your State Should Live"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"For each piece of state in your application:"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Identify every component that renders something based on that state."),(0,a.kt)("li",{parentName:"ul"},"Find a common owner component (a single component above all the components that need the state in the hierarchy)."),(0,a.kt)("li",{parentName:"ul"},"Either the common owner or another component higher up in the hierarchy should own the state."),(0,a.kt)("li",{parentName:"ul"},"If you can\u2019t find a component where it makes sense to own the state, create a new component simply for holding the state and add it somewhere in the hierarchy above the common owner component."))))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Add Inverse Data Flow"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Rendering the screen initially involves props and state flowing down the hierarchy"),(0,a.kt)("li",{parentName:"ul"},"Inverse data flow refers to components deep in the hierarchy responding to user actions (clicking a button, hovering, typing) and then updating the state in the higher container component(s)")))),(0,a.kt)("p",null,"See the section ",(0,a.kt)("a",{parentName:"p",href:"https://reactjs.org/docs/thinking-in-react.html"},"Thinking in React")," in the documentation for more information."),(0,a.kt)("h2",{id:"reference-1"},"Reference"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://gist.github.com/gordonbrander/2230317"},"Unique ID"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://reactjsexample.com/a-to-do-list-app-built-using-react-js/"},"To Do List Example")))))}u.isMDXComponent=!0}}]);